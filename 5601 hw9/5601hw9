%9.4-6
%% a
a = [1;2;3;4];
b = [2;3;4;5];
c = [2;3;5;7];
M = [a b c];
n = zeros(4,1);
s = [M n];
r = rref(s)
r =
     1     0     0     0
     0     1     0     0
     0     0     1     0
     0     0     0     0
%% b
d = 10*rand(4,1);
    M = [a b c d];
    f = [M n];
    g = rref(f)
g =
     1     0     0     0     0
     0     1     0     0     0
     0     0     1     0     0
     0     0     0     1     0
d
d =
       7.0936
       7.5469
       2.7603
        6.797
diaryA = [1 1 1 1;1 0 0 1;4 2 -2 1]'
A =
     1     1     4
     1     0     2
     1     0    -2
     1     1     1
[Q,R] = qr(A,o)
{Undefined function or variable 'o'.} 
[Q,R] = qr(A,0)
Q =
         -0.5          0.5      0.42426
         -0.5         -0.5      0.56569
         -0.5         -0.5     -0.56569
         -0.5          0.5     -0.42426
R =
           -2           -1         -2.5
            0            1          2.5
            0            0       3.5355
Q'Q -eye(3)
 Q'Q -eye(3)
   
Q'*Q -eye(3)
ans =
            0            0   5.5511e-17
            0  -2.2204e-16   1.1102e-16
   5.5511e-17   1.1102e-16  -4.4409e-16
B=A
B =
     1     1     4
     1     0     2
     1     0    -2
     1     1     1
B(:,3) = A(:,1)+A(:,2)
B =
     1     1     2
     1     0     1
     1     0     1
     1     1     2
rank(B)
ans =
     2
[Qb,Rb] = qr(B,0)
Qb =
         -0.5          0.5     -0.62638
         -0.5         -0.5       0.3281
         -0.5         -0.5      -0.3281
         -0.5          0.5      0.62638
Rb =
           -2           -1           -3
            0            1            1
            0            0   1.5509e-16
C = A;
C(:,2) =3*A(:,1);
[Qc,Rc] = qr(c,0);
[Qc2,Rc2,P] = qr(c,0)
Qc2 =
     -0.21442
     -0.32163
     -0.53606
     -0.75048
Rc2 =
      -9.3274
P =
     1
C = A;
C(:,2) =3*A(:,1);
[Qc,Rc] = qr(C,0);
[Qc2,Rc2,P] = qr(C,0)
Qc2 =
         -0.5      0.63509     -0.58878
         -0.5      0.17321      0.61143
         -0.5     -0.75056     -0.38497
         -0.5    -0.057735      0.36233
Rc2 =
           -6         -2.5           -2
            0       4.3301  -7.0509e-17
            0            0   6.5368e-17
P =
     2     3     1
C = A;
C(:,2) =3*A(:,1);
[Qc,Rc] = qr(C,0)
Qc =
         -0.5      0.86603   4.1633e-17
         -0.5     -0.28868      0.56614
         -0.5     -0.28868     -0.79259
         -0.5     -0.28868      0.22646
Rc =
           -2           -6         -2.5
            0  -2.8844e-16       3.1754
            0            0       2.9439
[Qc2,Rc2,P] = qr(C,0)
Qc2 =
         -0.5      0.63509     -0.58878
         -0.5      0.17321      0.61143
         -0.5     -0.75056     -0.38497
         -0.5    -0.057735      0.36233
Rc2 =
           -6         -2.5           -2
            0       4.3301  -7.0509e-17
            0            0   6.5368e-17
P =
     2     3     1
C = A;
C(:,2) =3+A(:,1);
[Qc,Rc] = qr(C,0)
Qc =
         -0.5      0.86603   4.1633e-17
         -0.5     -0.28868      0.56614
         -0.5     -0.28868     -0.79259
         -0.5     -0.28868      0.22646
Rc =
           -2           -8         -2.5
            0  -3.8459e-16       3.1754
            0            0       2.9439
[Qc2,Rc2,P] = qr(C,0)
Qc2 =
         -0.5      0.63509     -0.58878
         -0.5      0.17321      0.61143
         -0.5     -0.75056     -0.38497
         -0.5    -0.057735      0.36233
Rc2 =
           -8         -2.5           -2
            0       4.3301  -7.0509e-17
            0            0   6.5368e-17
P =
     2     3     1
[Q,R] = qr(A)
Q =
         -0.5          0.5      0.42426     -0.56569
         -0.5         -0.5      0.56569      0.42426
         -0.5         -0.5     -0.56569     -0.42426
         -0.5          0.5     -0.42426      0.56569
R =
           -2           -1         -2.5
            0            1          2.5
            0            0       3.5355
            0            0            0
Q'+Q-eye(4)
ans =
           -2  -1.1102e-16    -0.075736      -1.0657
  -1.1102e-16           -2     0.065685      0.92426
    -0.075736     0.065685      -2.1314     -0.84853
      -1.0657      0.92426     -0.84853      0.13137
Q'*Q-eye(4)
ans =
            0            0   5.5511e-17  -5.5511e-17
            0  -2.2204e-16   1.1102e-16   5.5511e-17
   5.5511e-17   1.1102e-16  -4.4409e-16  -1.3402e-16
  -5.5511e-17   5.5511e-17  -1.3402e-16            0
